<!-- Global taglib - these tags are shared across all subsites -->

<include src="rapid" plugin="hobo"/>

<include src="taglibs/auto/rapid/cards"/>
<include src="taglibs/auto/rapid/pages"/>
<include src="taglibs/auto/rapid/forms"/>
<include gem="hobo-jquery" />
<include src="paperclip" plugin="paperclip_with_hobo"/>
<set-theme name="clean-sidemenu"/>

<!-- Client side Layout -->

<extend tag="page" attrs="title, full-title" >
  <old-page merge title="&title" full-title="&full_title" without-live-search without-ajax-progress>

    <stylesheets: param>
      <stylesheet name="global" param="app-stylesheet"/>
      <local-css locale="#{I18n.locale}" name="application"/>
    </stylesheets:>
<header: replace> </header:>  
<content: replace>
 
 <div class="wrapper" param>
    <social locale="#{I18n.locale}" />
    <div param="site-header">
     <main-nav/>    
    </div>
    <div class="#{I18n.locale} " param="accent" />
    <div class="page-title" param="page-title">
      <page-title />
    </div>
    <div param="main">
      <left-nav/>
      <div class="right_panel" param="content" />  
    </div>
    <div param="footer"/>
 </div>
   <contactForm/>
  </content:>
  </old-page>
</extend>

<!-- /Client Side Layout -->

<extend tag="page">
  <old-page merge>
    <custom-scripts:>
      <hjq-assets/>
    </custom-scripts>
  </old-page>
</extend>


<extend tag="page">
  <old-page merge>
    <footer:>

     <ul id="bottom_nav">
      <li><a href="/">Home</a></li>
      <li><a href="#">About Seaga</a></li>
      <li><a href="#job">Opportunities</a></li>
      <li><a href="#contactForm">Contact Us</a></li>
      <li><a with="&Manual">Operator's Manuals</a></li>
     </ul>
     <span id="copy_right">Â© #{Time.now.year} Seaga - All rights reserved</span>
    </footer:>
  </old-page>
</extend>

<def tag="left-nav">
  <div class="left_panel">
      <ul class="left_nav">
       <li repeat="&Category.find(:all, :joins => :site, :conditions => {:sites => {:name => I18n.locale}})"><%= link_to this, vending_solution_path(this) %></li>
      </ul>
      <div class="contact_cards">
        <uk-info />
        <us-info />
        <in-info />
      </div>
   </div>
</def>

<def tag="contactForm">
  <form with="Contact" >
          <field-list: fields="name, email_address, password, password_confirmation"/>
         <submit: label="Submit"/>
    </form>
</def>

<def tag="main-nav">
  <navigation merge-attrs param="default">
       <nav-item href="#{base_url}/" class="about">About Seaga</nav-item>
       
       <li class="solutions">
          <a href="#" >Vending Solutions</a>
          <ul class="sub-nav">
                <li repeat="&Category.find(:all, :joins => :site, :conditions => {:sites => {:name => I18n.locale}})"><%= link_to this, vending_solution_path(this) %></li>
          </ul>
        </li>
        
        <li class="resources">
          <a href="#">Customer Resources</a>
          <ul class="sub-nav">
            <nav-item with="&Manual">Manuals</nav-item>
            <nav-item with="&Brochure">Brochures</nav-item>
          </ul>
        </li>
       
        <nav-item with="#job" class="employment"><a href="#employment">Employment</a></nav-item>
        
        <li class="contact"><a href="#contactForm">Contact Us</a></li>
  </navigation>
</def>


<def tag="card" for="MachineAssignment">
  <card class="machine-assignment" param="default" merge no-wrapper>
		<%= link_to image_tag(this.machine.photo.url(:medium),  {:class => 'machine_img'}), vending_solution_machine_path(this.category, this.machine), :class => 'photo_link machine-link' %>
		<div class="teaser_link machine-link">
			<h3 param="heading"><%= link_to this.machine.name, vending_solution_machine_path(this.category, this.machine), :class => 'view machine-name' %></h3>
			<p><view:machine.preview no-wrapper/></p>
		</div>
  </card>
</def>

